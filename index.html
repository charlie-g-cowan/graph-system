<!DOCTYPE html>
<html>
<head>
<title>Graph System</title>
<script src="math.js" type="text/javascript"></script>
</head>
<body>
y=<input type="text" id="input">
<button onclick="draw();">Submit</button><br>
Please use ^ for powers, and surround with brackets, e.g. "-(x^2) + 5"
<br>y = 2 * x + 1
<br>y = -x^2 + 5
<br>
<canvas id="canvas" width="1000" height="1000" style="border:1px solid #AAAAAA;">No Browser Support</canvas>
<script>
//Initialise math.js library, you should check them out: http://mathjs.org/
var math = mathjs();

//Get canvas and set context
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");

var from = -4;
var to = 4;
if(from>to) {
	var diff = from - to;
} else {
	var diff = to - from;
}

var indent = diff / 10000;
var addto = (diff * 100) / 2;
var timesby = 1000 / (diff * 100);
alert(from);
alert(to);
alert(diff);
alert(indent)

function drawGraphLines() {
//Draw graph lines
	context.beginPath();
	context.moveTo(500,0);
	context.lineTo(500,1000);
	context.moveTo(0,500);
	context.lineTo(1000,500);

//Create indent things
	for(i=0;i<=1000;i+=10) {
//If it is a whole or half number make it long
		if(i % 50 == 0) {
			var posVal = 490;
			var minVal = 510;
		} else {
			var posVal = 495;
		var minVal = 505;
		}
//Draw each indent
		context.moveTo(minVal,i);
		context.lineTo(posVal,i);
	}

	for(i=0;i<=1000;i+=10) {
//If it is a whole or half number make it long
		if(i % 50 == 0) {
			var posVal = 490;
			var minVal = 510;
		} else {
			var posVal = 495;
			var minVal = 505;
		}
//Draw each indent
		context.moveTo(i, minVal);
		context.lineTo(i, posVal);
	}

	context.closePath();
	context.stroke();

//Create numbers at side
	context.fillStyle = "black";
	context.font = "20px Garamond";
	context.fillText("-5",475,1005);
	context.fillText("-4",475,905);
	context.fillText("-3",475,805);
	context.fillText("-2",475,705);
	context.fillText("-1",475,605);
	context.fillText("1",510,405);
	context.fillText("2",510,305);
	context.fillText("3",510,205);
	context.fillText("4",510,105);
	context.fillText("5",510,5);

/*	context.fillText("5",990,525);
	context.fillText("4",890,525);
	context.fillText("3",790,525);
	context.fillText("2",690,525);
	context.fillText("1",590,525);
	context.fillText("-1",395,485);
	context.fillText("-2",295,485);
	context.fillText("-3",195,485);
	context.fillText("-4",95,485);
	context.fillText("-5",-5,485);*/
	for(i=1;i<=diff;i++) {
		var displayed = i + from - 1;
		if(displayed !== 0) {
			var positionno = (1000/diff) * (i - 1);
			context.fillText(String(displayed),positionno, 500);
		}
	}
/*
	context.fillText("2",1000,500);
	context.fillText("1",750,500);
	context.fillText("-1",250,500);
	context.fillText("-2",0,500);
*/
}

//Draw axis
drawGraphLines();

//BEGIN CREATING ACTUAL GRAPH
function draw() {
//Clear canvas and draw axis
	clear();
	var equation = document.getElementById("input").value;

	for(i=from; i<=to; i+=indent) {
		var caseequation = equation.replace("x", "(" + i + ")");
		var y = math.eval(caseequation);
		context.fillRect( ((100*i)+addto) * timesby , 1000-((100*y)+500 ),1,1); 
	}
}

//Function to clear canvas then redraw axis
function clear() {
	context.clearRect(0, 0, canvas.width, canvas.height);
	drawGraphLines();
}
</script>
</body>
</html>
